{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
        <title>Ficha eje</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    </head>

<body>
    <nav class="navbar navbar-light navbar-expand-md">
        <div class="container-fluid"><a class="navbar-brand" href="#" style="font-size: 28px;">mercave</a><button data-bs-toggle="collapse" class="navbar-toggler" data-bs-target="#navcol-1"><span class="visually-hidden">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navcol-1" style="margin-right: 0px;margin-left: 30px;">
                <ul class="navbar-nav">
                    
                    <li class="nav-item dropdown"><a class="dropdown-toggle nav-link" aria-expanded="false" data-bs-toggle="dropdown" href="#">Explotación</a>
                        <div class="dropdown-menu"><a class="dropdown-item" href="{% url 'ejes_expl' %}">Ejes</a><a class="dropdown-item" href="{% url 'cambiadores_expl' %}">Cambiadores</a><a class="dropdown-item" href="#">Trenes</a></div>
                    </li>
                    
                    <li class="nav-item dropdown"><a class="dropdown-toggle nav-link" aria-expanded="false" data-bs-toggle="dropdown" href="#">Gestión Adif&nbsp;</a>
                        <div class="dropdown-menu">
                            <h6 class="dropdown-header">Actores</h6><a class="dropdown-item" href="#">Diseñadores</a><a class="dropdown-item" href="#">Fabricantes</a><a class="dropdown-item" href="#">Mantenedores</a><a class="dropdown-item" href="#">Operadores</a><a class="dropdown-item" href="#">Certificadores</a>
                            <div class="dropdown-divider"></div>
                            <h6 class="dropdown-header">Autorizaciones</h6><a class="dropdown-item" href="#">Ejes</a><a class="dropdown-item" href="#">Cambiadores</a><a class="dropdown-item" href="#">Vagones</a>
                            <div class="dropdown-divider"></div>
                            <h6 class="dropdown-header">Certificaciones E.T.I</h6><a class="dropdown-item" href="#">Versiones ejes</a><a class="dropdown-item" href="#">Versines Cambiadores</a>
                        </div>
                    </li>
                   
                    <li class="nav-item dropdown"><a class="dropdown-toggle nav-link" aria-expanded="false" data-bs-toggle="dropdown" href="#">Ingeniería&nbsp;</a>
                        <div class="dropdown-menu">
                            <h6 class="dropdown-header">Diseño</h6><a class="dropdown-item" href="#">Versiones de Ejes</a><a class="dropdown-item" href="#">Cambiadores</a><a class="dropdown-item" href="#">Bogies</a>
                            <div class="dropdown-divider"></div>
                            <h6 class="dropdown-header">Ensayos</h6><a class="dropdown-item" href="#">Bancos de Ensayo</a><a class="dropdown-item" href="#">Ensayos en vía</a><a class="dropdown-item" href="#">Modelos IA</a>
                        </div>
                    </li>
                   
                    <li class="nav-item dropdown"><a class="dropdown-toggle nav-link" aria-expanded="false" data-bs-toggle="dropdown" href="#">Fabricación&nbsp;</a>
                        <div class="dropdown-menu"><a class="dropdown-item" href="#">Ejes</a><a class="dropdown-item" href="#">Cambiadores</a></div>
                    </li>
                    <li class="nav-item dropdown"><a class="dropdown-toggle nav-link" aria-expanded="false" data-bs-toggle="dropdown" href="#">Mantenimiento&nbsp;</a>
                        <div class="dropdown-menu"><a class="dropdown-item" href="#">Ejes</a><a class="dropdown-item" href="#">Cambiadores</a><a class="dropdown-item" href="#">Vagones</a></div>
                    </li>
                    <li class="nav-item"></li>
                    <li class="nav-item"></li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item" style="border-left-width: 2px;border-left-color: var(--bs-gray);margin-left: 10px;"></li>
                    <li class="nav-item"><a class="nav-link" href="#">{{ user.username }}</a></li>
                    <li class="nav-item"></li>
                    <li class="nav-item"><a class="nav-link" href="#">Organización</a></li>
                </ul><a href="#" ><button class="btn btn-primary" type="button" style="margin-left: 10px;">log out</button></a>
                <ul class="navbar-nav"></ul>
            </div>
        </div>
    </nav>
    <div class="container-fluid d-lg-flex d-xxl-flex flex-row align-items-lg-start justify-content-xxl-start align-items-xxl-start">
        <div class="col-lg-2 offset-lg-0">
            <h5>Eje:</h5>
            Código:<br>
            {{ eje.codigo }}<br>
            Versión:<br>
            {{ eje.version }}<br>
            Fabricante:<br>
            {{ eje.fabricante.organizacion.codigo }}<br>
            keeper:<br>
            {{ eje.keeper.organizacion.codigo }}<br>
            Mantenedor:<br>
            {{ eje.mantenedor.organizacion.codigo }}<br>
            Núm. Cambios:<br>
            {{ eje.num_cambios }}<br>
            km rodados:<br>
            {{ eje.km }}<br>
            Coeficiente Trabajo:<br>
            {{ eje.coef_trabajo }}<br>
        </div>
        <div class="col-lg-4 offset-lg-0">
            <h6>Circulaciones:</h6>
            <table>
                <thead>
                    <th>Fecha</th><th>Inicio</th><th>Fin</th><th>(Km/h)</th><th>km</th><th>Alarma</th>
                </thead>
                <tbody>
                    <tr>
                        <td>06.05.22</td><td>Madrid</td><td>Cordoba</td><td>45</td><td>417</td><td>Si</td>
                    </tr>
                    <tr>
                        <td>07.05.22</td><td>Córdoba</td><td>Antequera</td><td>74</td><td>115</td><td>No</td>
                    </tr>
                    <tr>
                        <td>08.05.22</td><td>Antequera</td><td>Tarragona</td><td>50</td><td>798</td><td>No</td>
                    </tr>
                    <tr>    
                        <td>09.05.22</td><td>Tarragona</td><td>Madrid</td><td>61</td><td>499</td><td>No</td>
                    </tr>
                </tbody>
            </table>
            
        </div>
        <div class="col-lg-6">
            {% autoescape off %}
                {{ mapa_eje }}
            {% endautoescape %}
        </div>
    </div>
    <div class="container-fluid d-lg-flex d-xxl-flex flex-row align-items-lg-start justify-content-xxl-start align-items-xxl-start">
        <div class="col-lg-2 offset-lg-0"></div>
        <div class="col-lg-4 offset-lg-0">
            <h6>Cambios:</h6>
            <table>
                <thead>
                    <th>Fecha</th><th>Cambiador</th><th>Sentido</th>
                </thead>
                <tbody>
                {% for cambio in cambios %}
                    <tr> 
                        <td>{{ cambio.inicio }}</td>
                        <td>{{ cambio.cambiador.nombre }}</td>
                        <td>{{ cambio.sentido }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="col-lg-6">
            {% autoescape off %}
                {{ mapa_cambios }}
            {% endautoescape %}
        </div>
    </div>
    <div class="container-fluid d-lg-flex d-xxl-flex flex-row align-items-lg-start justify-content-xxl-start align-items-xxl-start">
        <div class="col-lg-6 offset-lg-0">
            <h6>Alarmas:</h6>
            <table>
                <thead>
                    <th>Fecha-hora</th><th>Mensaje</th><th>long</th><th>lat</th>
                </thead>
                <tbody>
                    <tr>
                        <td>06/05/2022 14:34:15</td><td>Aceleraciones anormales en eje Z</td><td>-1.49876</td><td>40.04213</td>
                    </tr>
                    <tr>
                        <td>06/05/2022 14:34:15</td><td>Excesiva temperatura</td><td>-1.49876</td><td>40.04213</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="col-lg-6">
            {% autoescape off %}
                {{ grafico_alarma }}
            {% endautoescape %} 
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>